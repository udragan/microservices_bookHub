<p-table dataKey="id" editMode="row" [loading]="loading"
	[value]="users()"
	[paginator]="true"
	[rows]="5"
	[tableStyle]="{ 'min-width': '50rem' }"
	[rowsPerPageOptions]="[5, 10, 20]">
	<ng-template #header>
		<tr>
			<th>Name</th>
			<th style="width:25%">Email</th>
			<th style="width:25%">Role</th>
			<th style="width:150px">Actions</th>
		</tr>
	</ng-template>
	<ng-template #body let-item>
		<tr>
			<td>{{ item.name }}</td>
			<td>{{ item.email }}</td>
			<td>{{ item.role }}</td>
			<td>
				<div class="flex gap-2">
					<p-button icon="pi pi-pencil" (onClick)="editUser(item)" />
					<p-button icon="pi pi-key" severity="warn" (onClick)="confirmPasswordReset($event, item)" />
				</div>
			</td>
		</tr>
	</ng-template>
</p-table>

<p-dialog header="Edit User" [(visible)]="displayDialogSignal" [modal]="true">
	@if (selectedUserSignal(); as selectedUser) {		
		<div class="flex flex-column gap-4 pt-2">
			<p-floatlabel variant="on">			
				<input id="email" pInputText disabled="true" [ngModel]="selectedUser.email" class="w-full" />
				<label for="email">Email Address</label>
			</p-floatlabel>
			<p-floatlabel variant="on">			
				<input id="name" pInputText [(ngModel)]="selectedUser.name" class="w-full" />
				<label for="name">Name</label>
			</p-floatlabel>
			<p-floatlabel variant="on">			
				<p-select inputId="role" [options]="roles" [(ngModel)]="selectedUser.role" appendTo="body" class="w-full" />
				<label for="role">Role</label>
			</p-floatlabel>
		</div>
		<div class="flex justify-content-end gap-2 pt-3 border-top-1 surface-border mt-4">
			<p-button class="flex flex-column w-full" label="Save" (onClick)="saveUser()" />
		</div>
	}
</p-dialog>

<p-toast pRipple position="bottom-right" />
<p-confirmDialog />
